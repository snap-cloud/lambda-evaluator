define("js/utils/handle_iframe_binding",["jquery"],function(e){var t=function(t){var r=null;r="undefined"==typeof t?e("iframe, embed"):"undefined"!=typeof t.nodeName?e(t).find("iframe, embed"):t.$("iframe, embed"),n(r)},n=function(t){t.each(function(){if("IFRAME"===e(this).prop("tagName")){var t=e(this).attr("src");if(t){var n="wmode=transparent";if(-1!==t.indexOf("?")){var r=t.split("?");if(-1===r[1].search("wmode=transparent")){var i=r[1],o=r[0];e(this).attr("src",o+"?"+n+"&"+i)}}else 0!==t.lastIndexOf("javascript:",0)&&e(this).attr("src",t+"?"+n)}}else e(this).attr("wmode","transparent")})},r=function(t){if(t){var r=null,i=document.createElement("div");e(i).html(t),r=e(i).find("iframe, embed"),r.length>0&&(n(r),t=e(i).html())}return t};return{iframeBinding:t,iframeBindingHtml:r}}),define("js/utils/templates",["jquery","underscore"],function(e,t){var n=function(n){var r="#"+n+"-tpl",i=e(r).text();return i||console.error("Failed to load "+n+" template"),t.template(i)};return{loadTemplate:n}}),!function(e,t){var n=t.prototype.trim,r=t.prototype.trimRight,i=t.prototype.trimLeft,o=function(e){return 1*e||0},s=function(e,t){if(1>t)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n},a=[].slice,l=function(e){return null==e?"\\s":e.source?e.source:"["+f.escapeRegExp(e)+"]"},u={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},c={};for(var p in u)c[u[p]]=p;var d=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var n=s,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var o,s,a,l,u,c,p,f=1,h=r.length,m="",g=[];for(s=0;h>s;s++)if(m=e(r[s]),"string"===m)g.push(r[s]);else if("array"===m){if(l=r[s],l[2])for(o=i[f],a=0;a<l[2].length;a++){if(!o.hasOwnProperty(l[2][a]))throw new Error(d('[_.sprintf] property "%s" does not exist',l[2][a]));o=o[l[2][a]]}else o=l[1]?i[l[1]]:i[f++];if(/[^s]/.test(l[8])&&"number"!=e(o))throw new Error(d("[_.sprintf] expecting number but found %s",e(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=t.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=t(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",p=l[6]-t(o).length,u=l[6]?n(c,p):"",g.push(l[5]?o+u:u+o)}return g.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");o.push(a[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}(),f={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,n){return null==e?[]:(e=t(e),n=~~n,n>0?e.match(new RegExp(".{1,"+n+"}","g")):[e])},clean:function(e){return f.strip(e).replace(/\s+/g," ")},count:function(e,n){return null==e||null==n?0:t(e).split(n).length-1},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+c[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,n){var r;return n in u?u[n]:(r=n.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(r[1],16)):(r=n.match(/^#(\d+)$/))?t.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,n,r){var i=f.chars(e);return i.splice(~~t,~~n,r),i.join("")},insert:function(e,t,n){return f.splice(e,t,0,n)},include:function(e,n){return""===n?!0:null==e?!1:-1!==t(e).indexOf(n)},join:function(){var e=a.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return f.chars(e).reverse().join("")},startsWith:function(e,n){return""===n?!0:null==e||null==n?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(0,n.length)===n)},endsWith:function(e,n){return""===n?!0:null==e||null==n?!1:(e=t(e),n=t(n),e.length>=n.length&&e.slice(e.length-n.length)===n)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return f.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return f.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return f.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return f.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return f.capitalize(f.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return null==e?"":!r&&n?n.call(e):(r=l(r),t(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,n){return null==e?"":!n&&i?i.call(e):(n=l(n),t(e).replace(new RegExp("^"+n+"+"),""))},rtrim:function(e,n){return null==e?"":!n&&r?r.call(e):(n=l(n),t(e).replace(new RegExp(n+"+$"),""))},truncate:function(e,n,r){return null==e?"":(e=t(e),r=r||"...",n=~~n,e.length>n?e.slice(0,n)+r:e)},prune:function(e,n,r){if(null==e)return"";if(e=t(e),n=~~n,r=null!=r?t(r):"...",e.length<=n)return e;var i=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},o=e.slice(0,n+1).replace(/.(?=\W*\w*$)/g,i);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):f.rtrim(o.slice(0,o.length-1)),(o+r).length>e.length?e:e.slice(0,o.length)+r},words:function(e,t){return f.isBlank(e)?[]:f.trim(e,t).split(t||/\s+/)},pad:function(e,n,r,i){e=null==e?"":t(e),n=~~n;var o=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",i){case"right":return o=n-e.length,e+s(r,o);case"both":return o=n-e.length,s(r,Math.ceil(o/2))+e+s(r,Math.floor(o/2));default:return o=n-e.length,s(r,o)+e}},lpad:function(e,t,n){return f.pad(e,t,n)},rpad:function(e,t,n){return f.pad(e,t,n,"right")},lrpad:function(e,t,n){return f.pad(e,t,n,"both")},sprintf:d,vsprintf:function(e,t){return t.unshift(e),d.apply(null,t)},toNumber:function(e,n){if(null==e||""==e)return 0;e=t(e);var r=o(o(e).toFixed(~~n));return 0!==r||e.match(/^0+$/)?r:Number.NaN},numberFormat:function(e,t,n,r){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),r=r||",";var i=e.split("."),o=i[0],s=i[1]?(n||".")+i[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+s},strRight:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strRightBack:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var r=n?e.lastIndexOf(n):-1;return~r?e.slice(r+n.length,e.length):e},strLeft:function(e,n){if(null==e)return"";e=t(e),n=null!=n?t(n):n;var r=n?e.indexOf(n):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var n=e.lastIndexOf(t);return~n?e.slice(0,n):e},toSentence:function(e,t,n,r){t=t||", ",n=n||" and ";var i=e.slice(),o=i.pop();return e.length>2&&r&&(n=f.rtrim(t)+n),i.length?i.join(t)+n+o:o},toSentenceSerial:function(){var e=a.call(arguments);return e[3]=!0,f.toSentence.apply(f,e)},slugify:function(e){if(null==e)return"";var n="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",i=new RegExp(l(n),"g");return e=t(e).toLowerCase().replace(i,function(e){var t=n.indexOf(e);return r.charAt(t)||"-"}),f.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return f.surround(e,'"')},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,n,r){if(null==e)return"";if(n=~~n,null==r)return s(t(e),n);for(var i=[];n>0;i[--n]=e);return i.join(r)},levenshtein:function(e,n){if(null==e&&null==n)return 0;if(null==e)return t(n).length;if(null==n)return t(e).length;e=t(e),n=t(n);for(var r,i,o=[],s=0;s<=n.length;s++)for(var a=0;a<=e.length;a++)i=s&&a?e.charAt(a-1)===n.charAt(s-1)?r:Math.min(o[a],o[a-1],r)+1:s+a,r=o[a],o[a]=i;return o.pop()}};f.strip=f.trim,f.lstrip=f.ltrim,f.rstrip=f.rtrim,f.center=f.lrpad,f.rjust=f.lpad,f.ljust=f.rpad,f.contains=f.include,f.q=f.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=f),exports._s=f):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return f}):(e._=e._||{},e._.string=e._.str=f)}(this,String),define("js/views/feedback",["jquery","underscore","underscore.string","backbone","js/utils/templates"],function(e,t,n,r,i){var o=r.View.extend({options:{title:"",message:"",intent:null,type:null,shown:!0,icon:!0,closeIcon:!0,minShown:0,maxShown:1/0},initialize:function(){if(!this.options.type)throw"SystemFeedback: type required (given "+JSON.stringify(this.options)+")";if(!this.options.intent)throw"SystemFeedback: intent required (given "+JSON.stringify(this.options)+")";return this.template=i.loadTemplate("system-feedback"),this.setElement(e("#page-"+this.options.type)),this.options.actions&&this.options.actions.secondary&&!t.isArray(this.options.actions.secondary)&&(this.options.actions.secondary=[this.options.actions.secondary]),this},show:function(){return clearTimeout(this.hideTimeout),this.options.shown=!0,this.shownAt=new Date,this.render(),e.isNumeric(this.options.maxShown)&&(this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.maxShown)),this},hide:function(){return this.shownAt&&e.isNumeric(this.options.minShown)&&this.options.minShown>new Date-this.shownAt?(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.minShown-(new Date-this.shownAt))):(this.options.shown=!1,delete this.shownAt,this.render()),this},events:{"click .action-close":"hide","click .action-primary":"primaryClick","click .action-secondary":"secondaryClick"},render:function(){var e=o["active_"+this.options.type];return e&&e!==this&&(e.stopListening(),e.undelegateEvents()),this.$el.html(this.template(this.options)),o["active_"+this.options.type]=this,this},primaryClick:function(e){var t,n;t=this.options.actions,t&&(n=t.primary,n&&(n.preventDefault!==!1&&e.preventDefault(),n.click&&n.click.call(e.target,this,e)))},secondaryClick:function(e){var n,r,i,o;n=this.options.actions,n&&(r=n.secondary,r&&(o=0,e&&e.target&&(o=t.indexOf(this.$(".action-secondary"),e.target)),i=r[o],i.preventDefault!==!1&&e.preventDefault(),i.click&&i.click.call(e.target,this,e)))}});return o}),define("js/views/feedback_notification",["jquery","underscore","underscore.string","js/views/feedback"],function(e,t,n,r){var i,o,s=r.extend({options:e.extend({},r.prototype.options,{type:"notification",closeIcon:!1})});i=t.compose(n.capitalize,n.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(o,function(t){var n;n=s.extend({options:e.extend({},s.prototype.options,{intent:t})}),s[i(t)]=n});var a=s.Mini.prototype.options;return a.minShown=1250,a.closeIcon=!1,s}),define("js/views/feedback_prompt",["jquery","underscore","underscore.string","js/views/feedback"],function(e,t,n,r){var i,o,s=r.extend({options:e.extend({},r.prototype.options,{type:"prompt",closeIcon:!1,icon:!1}),render:function(){return window.$body||(window.$body=e(document.body)),this.options.shown?$body.addClass("prompt-is-shown"):$body.removeClass("prompt-is-shown"),r.prototype.render.apply(this,arguments)}});return i=t.compose(n.capitalize,n.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(o,function(t){var n;n=s.extend({options:e.extend({},s.prototype.options,{intent:t})}),s[i(t)]=n}),s}),define("js/views/utils/view_utils",["jquery","underscore","gettext","js/views/feedback_notification","js/views/feedback_prompt"],function(e,t,n,r,i){var o,s,a,l,u,c,p,d,f,h,m,g,v,w,y,x,b,C=65;return o=function(e,t){t||(t="collapsed"),e.closest(".expand-collapse").toggleClass("expand collapse"),e.closest(".is-collapsible, .window").toggleClass(t),e.closest(".is-collapsible").children("article").slideToggle()},s=function(){e(".ui-loading").show()},a=function(){e(".ui-loading").hide()},l=function(e,t,r,o,s){return new i.Warning({title:e,message:t,actions:{primary:{text:r,click:function(e){e.hide(),o()}},secondary:{text:n("Cancel"),click:function(e){return s&&s(),e.hide()}}}}).show()},u=function(e,t){var i;return i=new r.Mini({title:n(e)}),i.show(),t().done(function(){i.hide()})},c=function(e,t){return e.addClass("is-disabled").attr("aria-disabled",!0),t().always(function(){e.removeClass("is-disabled").attr("aria-disabled",!1)})},v=function(t){return function(n){n.preventDefault(),e.ajax({url:e(this).data("dismiss-link"),type:"DELETE",success:t})}},f=function(t){e("html, body").animate({scrollTop:t},500)},p=function(t){var n=t.offset().top;return n-e(window).scrollTop()},d=function(e,t){var n=e.offset().top,r=n-t;f(r)},h=function(e){window.location=e},m=function(){window.location.reload()},g=function(e,n){var r,i=e.changedAttributes();if(!i)return!1;for(r=0;r<n.length;r++)if(t.has(i,n[r]))return!0;return!1},w=function(e){return 0===e.length?n("Required field."):""},y=function(e,t){var r=w(e);if(r)return r;if(t){if(/\s/g.test(e))return n("Please do not use any spaces in this field.")}else if(e!==encodeURIComponent(e)||e.match(/[!'()*]/))return n("Please do not use any spaces or special characters in this field.");return""},x=function(n){var r=t.reduce(n,function(t,n){return t+e(n).val().length},0);return C>=r},b=function(n,r,i,o){x(i)?e(n.errorWrapper).removeClass(r.shown).addClass(r.hiding):(e(n.errorWrapper).addClass(r.shown).removeClass(r.hiding),e(n.errorMessage).html("<p>"+t.template(o,{limit:C})+"</p>"),e(n.save).addClass(r.disabled))},{toggleExpandCollapse:o,showLoadingIndicator:s,hideLoadingIndicator:a,confirmThenRunOperation:l,runOperationShowingMessage:u,disableElementWhileRunning:c,deleteNotificationHandler:v,setScrollTop:f,getScrollOffset:p,setScrollOffset:d,redirect:h,reload:m,hasChangedAttributes:g,validateRequiredField:w,validateURLItemEncoding:y,validateTotalKeyLength:x,checkTotalKeyLengthViolations:b}}),define("js/views/baseview",["jquery","underscore","backbone","gettext","js/utils/handle_iframe_binding","js/utils/templates","js/views/utils/view_utils"],function(e,t,n,r,i,o,s){var a=n.View.extend({events:{"click .ui-toggle-expansion":"toggleExpandCollapse"},options:{collapsedClass:"collapsed"},constructor:function(){t.bindAll(this,"beforeRender","render","afterRender");var e=this;this.render=t.wrap(this.render,function(t,n){return e.beforeRender(),t(n),e.afterRender(),e}),n.View.prototype.constructor.apply(this,arguments)},beforeRender:function(){},render:function(){return this},afterRender:function(){i.iframeBinding(this)},toggleExpandCollapse:function(t){var n=e(t.target);t.stopPropagation(),t.preventDefault(),s.toggleExpandCollapse(n,this.options.collapsedClass)},loadTemplate:function(e){return o.loadTemplate(e)}});return a}),define("js/views/xblock_validation",["jquery","underscore","js/views/baseview","gettext"],function(e,t,n,r){var i=n.extend({initialize:function(e){n.prototype.initialize.call(this),this.template=this.loadTemplate("xblock-validation-messages"),this.root=e.root},render:function(){return this.$el.html(this.template({validation:this.model,additionalClasses:this.getAdditionalClasses(),getIcon:this.getIcon.bind(this),getDisplayName:this.getDisplayName.bind(this)})),this},getIcon:function(e){return e===this.model.ERROR?"fa-exclamation-circle":e===this.model.WARNING||e===this.model.NOT_CONFIGURED?"fa-exclamation-triangle":null},getDisplayName:function(e){return e===this.model.WARNING||e===this.model.NOT_CONFIGURED?r("Warning"):e===this.model.ERROR?r("Error"):null},getAdditionalClasses:function(){return this.root&&this.model.get("summary").type===this.model.NOT_CONFIGURED&&0===this.model.get("messages").length?"no-container-content":""}});return i}),define("js/models/xblock_validation",["backbone","gettext","underscore"],function(e,t,n){var r=e.Model.extend({defaults:{summary:{},messages:[],empty:!0,xblock_id:null},WARNING:"warning",ERROR:"error",NOT_CONFIGURED:"not-configured",parse:function(e){if(!e.empty){var r="summary"in e?e.summary:{},i="messages"in e?e.messages:[];r.text||(r.text=t("This component has validation issues.")),r.type||(r.type=this.WARNING,n.find(i,function(e){return e.type===this.ERROR?(r.type=this.ERROR,!0):!1},this)),e.summary=r,e.showSummaryOnly&&(i=[]),e.messages=i}return e}});return r}),define("js/factories/xblock_validation",["js/views/xblock_validation","js/models/xblock_validation"],function(e,t){return function(n,r,i,o){r&&!i&&(n.showSummaryOnly=!0);var s=new t(n,{parse:!0});s.get("empty")||new e({el:o,model:s,root:i}).render()}});